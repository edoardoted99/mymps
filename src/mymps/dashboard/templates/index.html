<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>mymps dashboard</title>
<script src="https://unpkg.com/htmx.org@2.0.4"></script>
<style>
  :root { --bg: #0d1117; --card: #161b22; --border: #30363d; --fg: #e6edf3;
          --fg2: #8b949e; --green: #3fb950; --red: #f85149; --blue: #58a6ff; --yellow: #d29922; }
  * { box-sizing: border-box; margin: 0; padding: 0; }
  body { font-family: 'SF Mono', 'Cascadia Code', 'Fira Code', monospace;
         background: var(--bg); color: var(--fg); padding: 1.5rem; max-width: 960px; margin: 0 auto;
         font-size: 14px; line-height: 1.6; }
  h1 { font-size: 1.4rem; margin-bottom: 1.5rem; color: var(--blue); font-weight: 600; }
  h2 { font-size: 1rem; margin-bottom: 0.75rem; color: var(--fg2); text-transform: uppercase;
       letter-spacing: 0.05em; font-weight: 500; }

  .card { background: var(--card); border: 1px solid var(--border); border-radius: 8px;
          padding: 1.25rem; margin-bottom: 1.25rem; }

  .grid { display: grid; grid-template-columns: 1fr 1fr; gap: 1.25rem; }
  @media (max-width: 640px) { .grid { grid-template-columns: 1fr; } }

  .kv { display: flex; justify-content: space-between; padding: 0.3rem 0;
        border-bottom: 1px solid var(--border); }
  .kv:last-child { border-bottom: none; }
  .kv .k { color: var(--fg2); }
  .kv .v { font-weight: 600; }

  .dot { display: inline-block; width: 8px; height: 8px; border-radius: 50%; margin-right: 6px; }
  .dot.on { background: var(--green); box-shadow: 0 0 6px var(--green); }
  .dot.off { background: var(--red); box-shadow: 0 0 6px var(--red); }

  .section-label { color: var(--blue); font-size: 0.8rem; font-weight: 600; text-transform: uppercase;
                   letter-spacing: 0.05em; padding-bottom: 0.2rem; border-bottom: 1px solid var(--border);
                   margin-bottom: 0.1rem; }

  .err { color: var(--red); }

  .htmx-indicator { display: none; }
  .htmx-request .htmx-indicator { display: inline; }
  .htmx-request.htmx-indicator { display: inline; }
  .spinner { color: var(--yellow); }
</style>
</head>
<body>

<h1>mymps <span style="color: var(--fg2); font-weight: 400;">compute coprocessor</span></h1>

<div class="grid">

  <!-- ── Health ──────────────────────────────────────── -->
  <div class="card">
    <h2>Server Health
      <span class="spinner htmx-indicator" id="health-spinner">...</span>
    </h2>
    <div id="health-panel"
         hx-get="/partials/health"
         hx-trigger="load, every 5s"
         hx-indicator="#health-spinner">
      <span class="fg2">loading...</span>
    </div>
  </div>

  <!-- ── System Stats ──────────────────────────────────── -->
  <div class="card">
    <h2>System Stats
      <span class="spinner htmx-indicator" id="stats-spinner">...</span>
    </h2>
    <div id="stats-panel"
         hx-get="/partials/stats"
         hx-trigger="load, every 3s"
         hx-indicator="#stats-spinner">
      <span class="fg2">loading...</span>
    </div>
  </div>

</div>

</body>
</html>
